import{r as c,q as H,g as B,c as i,a as t,t as e,f as n,i as N,k as A,j as P,F as q,h as L,b as u,o as r,n as V}from"./index-D0ggnYb4.js";const D={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},I={class:"stats-card group"},E={class:"flex-1"},K={class:"text-3xl font-bold text-slate-900 mt-1"},O={class:"flex items-center gap-3 mt-2 text-sm"},T={class:"flex items-center text-emerald-600"},U={class:"flex items-center text-red-600"},G={class:"stats-card group"},J={class:"flex-1"},Q={class:"text-3xl font-bold text-slate-900 mt-1"},R={class:"flex items-center gap-3 mt-2 text-sm"},W={class:"flex items-center text-emerald-600"},X={class:"stats-card group"},Y={class:"flex-1"},Z={class:"text-3xl font-bold text-slate-900 mt-1"},$={class:"flex items-center gap-3 mt-2 text-sm text-slate-500"},tt={class:"stats-card group"},st={class:"flex-1"},et={class:"text-3xl font-bold text-slate-900 mt-1"},at={class:"flex items-center gap-3 mt-2 text-sm text-slate-500"},lt={class:"text-blue-600 font-medium"},ot={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},nt={class:"card"},it={class:"flex items-center justify-between mb-6"},rt={key:0,class:"flex items-center justify-center py-12 text-slate-400"},dt={key:1,class:"flex flex-col items-center justify-center py-12 text-slate-400"},ct={key:2,class:"space-y-3"},ut={class:"flex items-center gap-3"},vt={class:"w-10 h-10 rounded-lg bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center"},xt={class:"text-white font-bold text-sm"},mt={class:"font-semibold text-slate-900"},pt={class:"text-sm text-slate-500"},ft={class:"flex items-center gap-4"},gt={class:"text-right"},ht={class:"card"},bt={class:"space-y-4"},wt={class:"flex items-center justify-between p-4 bg-slate-50 rounded-xl"},kt={class:"text-lg font-bold text-slate-900"},_t={class:"flex items-center justify-between p-4 bg-slate-50 rounded-xl"},yt={class:"text-lg font-bold text-slate-900"},Ct={__name:"Dashboard",setup(Mt){const v=c(!0),l=c({}),d=c({});H(async()=>{try{const[a,s]=await Promise.all([B.getOverview(),B.getProviderStats()]);l.value=a,d.value=s}catch(a){console.error("Failed to load dashboard data:",a)}finally{v.value=!1}});function x(a){return a>=1e6?(a/1e6).toFixed(1)+"M":a>=1e3?(a/1e3).toFixed(1)+"K":a.toString()}function z(a){return a>=80?"text-green-600 font-medium":a>=50?"text-yellow-600 font-medium":"text-red-600 font-medium"}function S(a){return{active:"badge badge-success",cooling:"badge badge-warning",failed:"badge badge-danger",inactive:"badge badge-gray"}[a]||"badge badge-gray"}return(a,s)=>{var m,p,f,g,h,b,w,k,_,y,M,j,C;const F=P("router-link");return r(),i("div",null,[s[22]||(s[22]=t("div",{class:"mb-8"},[t("h1",{class:"text-3xl font-bold text-slate-900"},"仪表盘"),t("p",{class:"text-slate-500 mt-1"},"API 网关运行概览")],-1)),t("div",D,[t("div",I,[s[3]||(s[3]=t("div",{class:"stats-card-icon bg-blue-500"},[t("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2"})])],-1)),t("div",E,[s[2]||(s[2]=t("p",{class:"text-sm font-medium text-slate-500 uppercase tracking-wide"},"服务商",-1)),t("p",K,e(((m=l.value.providers)==null?void 0:m.total)||0),1),t("div",O,[t("span",T,[s[0]||(s[0]=t("span",{class:"w-2 h-2 bg-emerald-500 rounded-full mr-1.5"},null,-1)),n(" "+e(((p=l.value.providers)==null?void 0:p.active)||0)+" 活跃 ",1)]),t("span",U,[s[1]||(s[1]=t("span",{class:"w-2 h-2 bg-red-500 rounded-full mr-1.5"},null,-1)),n(" "+e(((f=l.value.providers)==null?void 0:f.failed)||0)+" 异常 ",1)])])])]),t("div",G,[s[6]||(s[6]=t("div",{class:"stats-card-icon bg-violet-500"},[t("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})])],-1)),t("div",J,[s[5]||(s[5]=t("p",{class:"text-sm font-medium text-slate-500 uppercase tracking-wide"},"用户",-1)),t("p",Q,e(((g=l.value.users)==null?void 0:g.total)||0),1),t("div",R,[t("span",W,[s[4]||(s[4]=t("span",{class:"w-2 h-2 bg-emerald-500 rounded-full mr-1.5"},null,-1)),n(" "+e(((h=l.value.users)==null?void 0:h.active)||0)+" 活跃 ",1)])])])]),t("div",X,[s[8]||(s[8]=t("div",{class:"stats-card-icon bg-amber-500"},[t("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})])],-1)),t("div",Y,[s[7]||(s[7]=t("p",{class:"text-sm font-medium text-slate-500 uppercase tracking-wide"},"会话",-1)),t("p",Z,e(((b=l.value.sessions)==null?void 0:b.active)||0),1),t("div",$," 共 "+e(((w=l.value.sessions)==null?void 0:w.total)||0)+" 个会话 ",1)])]),t("div",tt,[s[11]||(s[11]=t("div",{class:"stats-card-icon bg-emerald-500"},[t("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})])],-1)),t("div",st,[s[10]||(s[10]=t("p",{class:"text-sm font-medium text-slate-500 uppercase tracking-wide"},"请求",-1)),t("p",et,e(x(((k=l.value.requests)==null?void 0:k.total)||0)),1),t("div",at,[s[9]||(s[9]=n(" 今日 ",-1)),t("span",lt,e(x(((_=l.value.requests)==null?void 0:_.today)||0)),1)])])])]),t("div",ot,[t("div",nt,[t("div",it,[s[13]||(s[13]=t("h3",{class:"text-lg font-semibold text-slate-900"},"服务商状态",-1)),N(F,{to:"/providers",class:"text-sm text-blue-600 hover:text-blue-700 font-medium"},{default:A(()=>[...s[12]||(s[12]=[n(" 查看全部 → ",-1)])]),_:1})]),v.value?(r(),i("div",rt,[...s[14]||(s[14]=[t("svg",{class:"animate-spin h-8 w-8 mr-3",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),n(" 加载中... ",-1)])])):(y=d.value.providers)!=null&&y.length?(r(),i("div",ct,[(r(!0),i(q,null,L((M=d.value.providers)==null?void 0:M.slice(0,5),o=>(r(),i("div",{key:o.id,class:"flex items-center justify-between p-4 bg-slate-50 rounded-xl hover:bg-slate-100 transition-colors"},[t("div",ut,[t("div",vt,[t("span",xt,e(o.name.charAt(0).toUpperCase()),1)]),t("div",null,[t("div",mt,e(o.name),1),t("div",pt," 负载: "+e(o.current_load)+"/"+e(o.max_concurrent),1)])]),t("div",ft,[t("div",gt,[s[16]||(s[16]=t("div",{class:"text-sm text-slate-500"},"健康度",-1)),t("div",{class:V([z(o.health_score),"font-bold"])},e(o.health_score)+"% ",3)]),t("span",{class:V(S(o.status))},e(o.status),3)])]))),128))])):(r(),i("div",dt,[...s[15]||(s[15]=[t("svg",{class:"w-16 h-16 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2"})],-1),t("p",{class:"text-lg font-medium text-slate-600"},"暂无服务商",-1),t("p",{class:"text-sm"},"添加服务商以开始路由 API 请求",-1)])]))]),t("div",ht,[s[21]||(s[21]=t("div",{class:"flex items-center justify-between mb-6"},[t("h3",{class:"text-lg font-semibold text-slate-900"},"系统信息"),t("span",{class:"px-2.5 py-1 bg-emerald-100 text-emerald-700 text-xs font-medium rounded-full"}," 系统运行正常 ")],-1)),t("div",bt,[s[20]||(s[20]=u('<div class="flex items-center justify-between p-4 bg-slate-50 rounded-xl"><div class="flex items-center gap-3"><div class="w-10 h-10 rounded-lg bg-emerald-100 flex items-center justify-center"><svg class="w-5 h-5 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2"></path></svg></div><span class="font-medium text-slate-700">服务器状态</span></div><span class="status-badge status-online">在线</span></div><div class="flex items-center justify-between p-4 bg-slate-50 rounded-xl"><div class="flex items-center gap-3"><div class="w-10 h-10 rounded-lg bg-blue-100 flex items-center justify-center"><svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4"></path></svg></div><span class="font-medium text-slate-700">数据库</span></div><span class="status-badge status-online">已连接</span></div>',2)),t("div",wt,[s[17]||(s[17]=u('<div class="flex items-center gap-3"><div class="w-10 h-10 rounded-lg bg-violet-100 flex items-center justify-center"><svg class="w-5 h-5 text-violet-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path></svg></div><span class="font-medium text-slate-700">平均健康度</span></div>',1)),t("span",kt,e(Math.round(((j=d.value.summary)==null?void 0:j.avgHealth)||0))+"%",1)]),t("div",_t,[s[19]||(s[19]=u('<div class="flex items-center gap-3"><div class="w-10 h-10 rounded-lg bg-amber-100 flex items-center justify-center"><svg class="w-5 h-5 text-amber-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg></div><span class="font-medium text-slate-700">总容量</span></div>',1)),t("span",yt,[n(e(((C=d.value.summary)==null?void 0:C.totalCapacity)||0)+" ",1),s[18]||(s[18]=t("span",{class:"text-sm font-normal text-slate-500"},"并发",-1))])])])])])])}}};export{Ct as default};
